!function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/wp-content/themes/P8-Openclassrooms/assets/",o(o.s=1)}([,function(t,e,o){"use strict";o.r(e);o(2),o(3),o(4),o(5),o(6),o(7),o(8);!function(){var t=new function(t){this.storage=new app.Store(t),this.model=new app.Model(this.storage),this.template=new app.Template,this.view=new app.View(this.template),this.controller=new app.Controller(this.model,this.view)}("todos-vanillajs");function e(){t.controller.setView(document.location.hash)}$on(window,"load",e),$on(window,"hashchange",e)}()},function(t,e){!function(t){"use strict";function e(t,e){var o=this;o.model=t,o.view=e,o.view.bind("newTodo",(function(t){o.addItem(t)})),o.view.bind("itemEdit",(function(t){o.editItem(t.id)})),o.view.bind("itemEditDone",(function(t){o.editItemSave(t.id,t.title)})),o.view.bind("itemEditCancel",(function(t){o.editItemCancel(t.id)})),o.view.bind("itemRemove",(function(t){o.removeItem(t.id)})),o.view.bind("itemToggle",(function(t){o.toggleComplete(t.id,t.completed)})),o.view.bind("removeCompleted",(function(){o.removeCompletedItems()})),o.view.bind("toggleAll",(function(t){o.toggleAll(t.completed)}))}e.prototype.setView=function(t){var e=t.split("/")[1]||"";this._updateFilterState(e)},e.prototype.showAll=function(){var t=this;t.model.read((function(e){t.view.render("showEntries",e)}))},e.prototype.showActive=function(){var t=this;t.model.read({completed:!1},(function(e){t.view.render("showEntries",e)}))},e.prototype.showCompleted=function(){var t=this;t.model.read({completed:!0},(function(e){t.view.render("showEntries",e)}))},e.prototype.addItem=function(t){var e=this;""!==t.trim()&&e.model.create(t,(function(){e.view.render("clearNewTodo"),e._filter(!0)}))},e.prototype.editItem=function(t){var e=this;e.model.read(t,(function(o){e.view.render("editItem",{id:t,title:o[0].title})}))},e.prototype.editItemSave=function(t,e){var o=this;0!==e.length?(e=e.trim(),o.model.update(t,{title:e},(function(){o.view.render("editItemDone",{id:t,title:e})}))):o.removeItem(t)},e.prototype.editItemCancel=function(t){var e=this;e.model.read(t,(function(o){e.view.render("editItemDone",{id:t,title:o[0].title})}))},e.prototype.removeItem=function(t){var e=this;e.model.read((function(t){t})),e.model.remove(t,(function(){e.view.render("removeItem",t),console.log("Element with ID: "+t+" has been removed.")})),e._filter()},e.prototype.removeCompletedItems=function(){var t=this;t.model.read({completed:!0},(function(e){e.forEach((function(e){t.removeItem(e.id)}))})),t._filter()},e.prototype.toggleComplete=function(t,e,o){var i=this;i.model.update(t,{completed:e},(function(){i.view.render("elementComplete",{id:t,completed:e})})),o||i._filter()},e.prototype.toggleAll=function(t){var e=this;e.model.read({completed:!t},(function(o){o.forEach((function(o){e.toggleComplete(o.id,t,!0)}))})),e._filter()},e.prototype._updateCount=function(){var t=this;t.model.getCount((function(e){t.view.render("updateElementCount",e.active),t.view.render("clearCompletedButton",{completed:e.completed,visible:e.completed>0}),t.view.render("toggleAll",{checked:e.completed===e.total}),t.view.render("contentBlockVisibility",{visible:e.total>0})}))},e.prototype._filter=function(t){var e=this._activeRoute.charAt(0).toUpperCase()+this._activeRoute.substr(1);this._updateCount(),(t||"All"!==this._lastActiveRoute||this._lastActiveRoute!==e)&&this["show"+e](),this._lastActiveRoute=e},e.prototype._updateFilterState=function(t){this._activeRoute=t,""===t&&(this._activeRoute="All"),this._filter(),this.view.render("setFilter",t)},t.app=t.app||{},t.app.Controller=e}(window)},function(t,e){!function(t){"use strict";t.qs=function(t,e){return(e||document).querySelector(t)},t.qsa=function(t,e){return(e||document).querySelectorAll(t)},t.$on=function(t,e,o,i){t.addEventListener(e,o,!!i)},t.$delegate=function(e,o,i,n){var r="blur"===i||"focus"===i;t.$on(e,i,(function(i){var r=i.target,l=t.qsa(o,e);Array.prototype.indexOf.call(l,r)>=0&&n.call(r,i)}),r)},t.$parent=function(e,o){if(e.parentNode)return e.parentNode.tagName.toLowerCase()===o.toLowerCase()?e.parentNode:t.$parent(e.parentNode,o)},NodeList.prototype.forEach=Array.prototype.forEach}(window)},function(t,e){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"use strict";function e(t){this.storage=t}e.prototype.create=function(t,e){e=e||function(){};var o={title:(t=t||"").trim(),completed:!1};this.storage.save(o,e)},e.prototype.read=function(t,e){var i=o(t);if(e=e||function(){},"function"===i)return e=t,this.storage.findAll(e);"string"===i||"number"===i?this.storage.find({id:t},e):this.storage.find(t,e)},e.prototype.update=function(t,e,o){this.storage.save(e,o,t)},e.prototype.remove=function(t,e){this.storage.remove(t,e)},e.prototype.removeAll=function(t){this.storage.drop(t)},e.prototype.getCount=function(t){var e={active:0,completed:0,total:0};this.storage.findAll((function(o){o.forEach((function(t){t.completed?e.completed++:e.active++,e.total++})),t(e)}))},t.app=t.app||{},t.app.Model=e}(window)},function(t,e){!function(t){"use strict";function e(t,e){if(e=e||function(){},this._dbName=t,!localStorage[t]){localStorage[t]=JSON.stringify({todos:[]})}e.call(this,JSON.parse(localStorage[t]))}e.prototype.find=function(t,e){if(e){var o=JSON.parse(localStorage[this._dbName]).todos;e.call(this,o.filter((function(e){for(var o in t)if(t[o]!==e[o])return!1;return!0})))}},e.prototype.findAll=function(t){(t=t||function(){}).call(this,JSON.parse(localStorage[this._dbName]).todos)},e.prototype.save=function(t,e,o){var i=JSON.parse(localStorage[this._dbName]),n=i.todos;if(e=e||function(){},o){for(var r=0;r<n.length;r++)if(n[r].id===o){for(var l in t)n[r][l]=t[l];break}localStorage[this._dbName]=JSON.stringify(i),e.call(this,n)}else t.id=Date.now(),n.push(t),localStorage[this._dbName]=JSON.stringify(i),e.call(this,[t])},e.prototype.remove=function(t,e){for(var o,i=JSON.parse(localStorage[this._dbName]),n=i.todos,r=0;r<n.length;r++)n[r].id==t&&(o=n[r].id);for(r=0;r<n.length;r++)n[r].id==o&&n.splice(r,1);localStorage[this._dbName]=JSON.stringify(i),e.call(this,n)},e.prototype.drop=function(t){var e={todos:[]};localStorage[this._dbName]=JSON.stringify(e),t.call(this,e.todos)},t.app=t.app||{},t.app.Store=e}(window)},function(t,e){!function(t){"use strict";var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},o=function(t){return e[t]},i=/[&<>"'`]/g,n=new RegExp(i.source);function r(){this.defaultTemplate='<li data-id="{{id}}" class="{{completed}}"><div class="view"><input class="toggle" type="checkbox" {{checked}}><label>{{title}}</label><button class="destroy"></button></div></li>'}r.prototype.show=function(t){var e,r,l,a="";for(e=0,r=t.length;e<r;e++){var c=this.defaultTemplate,d="",s="";t[e].completed&&(d="completed",s="checked"),a+=c=(c=(c=(c=c.replace("{{id}}",t[e].id)).replace("{{title}}",(l=t[e].title)&&n.test(l)?l.replace(i,o):l)).replace("{{completed}}",d)).replace("{{checked}}",s)}return a},r.prototype.itemCounter=function(t){return"<strong>"+t+"</strong> item"+(1===t?"":"s")+" left"},r.prototype.clearCompletedButton=function(t){return t>0?"Clear completed":""},t.app=t.app||{},t.app.Template=r}(window)},function(t,e){!function(t){"use strict";function e(t){this.template=t,this.ENTER_KEY=13,this.ESCAPE_KEY=27,this.$todoList=qs(".todo-list"),this.$todoItemCounter=qs(".todo-count"),this.$clearCompleted=qs(".clear-completed"),this.$main=qs(".main"),this.$footer=qs(".footer"),this.$toggleAll=qs(".toggle-all"),this.$newTodo=qs(".new-todo")}e.prototype._removeItem=function(t){var e=qs('[data-id="'+t+'"]');e&&this.$todoList.removeChild(e)},e.prototype._clearCompletedButton=function(t,e){this.$clearCompleted.innerHTML=this.template.clearCompletedButton(t),this.$clearCompleted.style.display=e?"block":"none"},e.prototype._setFilter=function(t){qs(".filters .selected").className="",qs('.filters [href="#/'+t+'"]').className="selected"},e.prototype._elementComplete=function(t,e){var o=qs('[data-id="'+t+'"]');o&&(o.className=e?"completed":"",qs("input",o).checked=e)},e.prototype._editItem=function(t,e){var o=qs('[data-id="'+t+'"]');if(o){o.className=o.className+" editing";var i=document.createElement("input");i.className="edit",o.appendChild(i),i.focus(),i.value=e}},e.prototype._editItemDone=function(t,e){var o=qs('[data-id="'+t+'"]');if(o){var i=qs("input.edit",o);o.removeChild(i),o.className=o.className.replace("editing",""),qsa("label",o).forEach((function(t){t.textContent=e}))}},e.prototype.render=function(t,e){var o=this;({showEntries:function(){o.$todoList.innerHTML=o.template.show(e)},removeItem:function(){o._removeItem(e)},updateElementCount:function(){o.$todoItemCounter.innerHTML=o.template.itemCounter(e)},clearCompletedButton:function(){o._clearCompletedButton(e.completed,e.visible)},contentBlockVisibility:function(){o.$main.style.display=o.$footer.style.display=e.visible?"block":"none"},toggleAll:function(){o.$toggleAll.checked=e.checked},setFilter:function(){o._setFilter(e)},clearNewTodo:function(){o.$newTodo.value=""},elementComplete:function(){o._elementComplete(e.id,e.completed)},editItem:function(){o._editItem(e.id,e.title)},editItemDone:function(){o._editItemDone(e.id,e.title)}})[t]()},e.prototype._itemId=function(t){var e=$parent(t,"li");return parseInt(e.dataset.id,10)},e.prototype._bindItemEditDone=function(t){var e=this;$delegate(e.$todoList,"li .edit","blur",(function(){this.dataset.iscanceled||t({id:e._itemId(this),title:this.value})})),$delegate(e.$todoList,"li .edit","keypress",(function(t){t.keyCode===e.ENTER_KEY&&this.blur()}))},e.prototype._bindItemEditCancel=function(t){var e=this;$delegate(e.$todoList,"li .edit","keyup",(function(o){o.keyCode===e.ESCAPE_KEY&&(this.dataset.iscanceled=!0,this.blur(),t({id:e._itemId(this)}))}))},e.prototype.bind=function(t,e){var o=this;switch(t){case"newTodo":$on(o.$newTodo,"change",(function(){e(o.$newTodo.value)}));break;case"removeCompleted":$on(o.$clearCompleted,"click",(function(){e()}));break;case"toggleAll":$on(o.$toggleAll,"click",(function(){e({completed:this.checked})}));break;case"itemEdit":$delegate(o.$todoList,"li label","dblclick",(function(){e({id:o._itemId(this)})}));break;case"itemRemove":$delegate(o.$todoList,".destroy","click",(function(){e({id:o._itemId(this)})}));break;case"itemToggle":$delegate(o.$todoList,".toggle","click",(function(){e({id:o._itemId(this),completed:this.checked})}));break;case"itemEditDone":o._bindItemEditDone(e);break;case"itemEditCancel":o._bindItemEditCancel(e)}},t.app=t.app||{},t.app.View=e}(window)},function(t,e){}]);